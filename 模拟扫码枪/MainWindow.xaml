<Window x:Class="模拟扫码枪.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:模拟扫码枪"
        mc:Ignorable="d"
        MouseDoubleClick="Window_MouseDoubleClick"
        Closing="Window_Closing"
        Title="模拟扫码枪" Height="750" Width="1100">
    <Window.DataContext>
        <local:MainWindowViewModel />
    </Window.DataContext>
    <Window.Resources>
        <DataTemplate DataType="{x:Type local:ScannerModel}">
            <Border BorderBrush="Black" BorderThickness="1" CornerRadius="5" Margin="5" Padding="5">
                <StackPanel>
                    <StackPanel.Resources>
                        <Style TargetType="DockPanel">
                            <Setter Property="Margin" Value="3"/>
                        </Style>
                        <Style TargetType="TextBlock" >
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="MinWidth" Value="65"/>
                        </Style>
                        <Style TargetType="CheckBox" >
                            <Setter Property="Margin" Value="5,0,0,0"/>
                        </Style>
                        <Style TargetType="TextBox">
                            <Setter Property="MinHeight" Value="22"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                        </Style>
                    </StackPanel.Resources>
                    <DockPanel>
                        <Border Width="15" Height="15" Background="{Binding StatusBrush}"/>
                        <CheckBox IsChecked="{Binding IsEnable}" Content="启用"/>
                        <CheckBox IsChecked="{Binding IsUseTriggerString}" Content="校验触发字符串"/>
                        <CheckBox IsChecked="{Binding AppendHexString}" Content="HEX(流水号/随机数)"/> 
                    </DockPanel> 
                    <DockPanel  IsEnabled="{Binding IsEnable, Converter={local:BoolReverseConverter}}">
                        <TextBlock Text="接口类型"/>
                        <UniformGrid Columns="2"  >
                            <ComboBox ItemsSource="{Binding DeviceTypeValues}" SelectedItem="{Binding DeviceType}"  /> 
                            <ComboBox ItemsSource="{Binding WorkModelValues}" SelectedItem="{Binding WorkModel}" Margin="5,0,0,0"/> 
                        </UniformGrid>
                    </DockPanel>
                    <DockPanel IsEnabled="{Binding IsEnable, Converter={local:BoolReverseConverter}}">
                        <TextBlock Text="附加内容"/>
                        <UniformGrid Columns="2" >
                            <ComboBox ItemsSource="{Binding ResponseModelValues}" SelectedItem="{Binding ResponseModel}" />
                            <ComboBox ItemsSource="{Binding AppendContentValues}" SelectedItem="{Binding AppendContent}" Margin="5,0,0,0"/>
                        </UniformGrid>
                    </DockPanel>
                    <DockPanel IsEnabled="{Binding IsEnable, Converter={local:BoolReverseConverter}}" Visibility="{Binding IsNetwork,Converter={local:BoolToVisibilityConverter }}">
                        <TextBlock Text="IP|Port"/>
                        <UniformGrid Columns="2"> 
                            <TextBox Text="{Binding IP}"  />
                            <TextBox Text="{Binding Port}" Margin="5,0,0,0"/>
                        </UniformGrid>
                    </DockPanel>
                    <DockPanel  IsEnabled="{Binding IsEnable, Converter={local:BoolReverseConverter}}" Visibility="{Binding IsSerialPort ,Converter={local:BoolToVisibilityConverter}}">
                        <TextBlock Text="串口名"/>
                        <ComboBox SelectedValue="{Binding PortName}" ItemsSource="{Binding PortNames}"/>
                    </DockPanel>
                    <DockPanel IsEnabled="{Binding IsEnable, Converter={local:BoolReverseConverter}}" Visibility="{Binding IsSerialPort ,Converter={local:BoolToVisibilityConverter}}">
                        <TextBlock Text="串口参数"/>
                        <DockPanel Margin="0">
                            <TextBox Text="{Binding BaudRate}" MinWidth="80"/>
                            <TextBox Text="{Binding DataBits}"  MinWidth="50"/>
                            <ComboBox SelectedValue="{Binding Parity}" ItemsSource="{Binding ParityValues}" />
                            <ComboBox SelectedValue="{Binding StopBits}" ItemsSource="{Binding StopBitsValues}"/>
                        </DockPanel>
                    </DockPanel> 
                    <DockPanel>
                        <TextBlock Text="触发内容"/>
                        <TextBox Text="{Binding TriggerString}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="发送内容"/>
                        <Button Content="发送" Command="{Binding  SendCommand}" DockPanel.Dock="Right" Margin="5,0,0,0"/>
                        <TextBox Text="{Binding AutoSendInterval}" MinWidth="50" Margin="5,0,0,0" DockPanel.Dock="Right"/>
                        <TextBox Text="{Binding SendString}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="接收内容"/>
                        <CheckBox IsChecked="{Binding IsTransmitReceiveDataToStandardInput}" IsEnabled="{Binding IsOnlyReceiveModel}" VerticalAlignment="Center" Content="转发仅接收内容" DockPanel.Dock="Right" Margin="5,0,0,0"/>
                        <TextBox Text="{Binding ReceiveString}"/>
                    </DockPanel>
                    <DockPanel>
                        <TextBlock Text="流水号"/>
                        <TextBox Text="{Binding AppendContentLength}" MinWidth="50" ToolTip="附加内容长度" Margin="5,0,0,0" DockPanel.Dock="Right"/>
                        <TextBox Text="{Binding OrderIndex}"/>
                    </DockPanel> 
                </StackPanel>
            </Border>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <TextBox Text="{Binding Msg}" AcceptsReturn="True" Grid.Column="1" Margin="5"/>
        <UniformGrid Columns="2" >
            <ContentControl Content="{Binding Scanners[0]}"/>
            <ContentControl Content="{Binding Scanners[1]}"/>
            <ContentControl Content="{Binding Scanners[2]}"/>
            <ContentControl Content="{Binding Scanners[3]}"/>
            <ContentControl Content="{Binding Scanners[4]}"/>
            <ContentControl Content="{Binding Scanners[5]}"/>
        </UniformGrid>

    </Grid>
</Window>
